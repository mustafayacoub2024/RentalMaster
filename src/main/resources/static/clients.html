<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Управление компаниями</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }
        .header {
            background-color: #007BFF;
            color: white;
            padding: 10px;
            text-align: center;
        }
        .container {
            padding: 20px;
        }
        .form-group {
            margin-bottom: 15px;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
        }
        .form-group input {
            width: 100%;
            padding: 8px;
            box-sizing: border-box;
        }
        .button {
            background-color: #007BFF;
            color: white;
            padding: 10px 20px;
            border: none;
            cursor: pointer;
        }
        .button:hover {
            background-color: #0056b3;
        }
        .response {
            margin-top: 20px;
            padding: 10px;
            background-color: #f8f9fa;
            border: 1px solid #ddd;
        }
    </style>
</head>
<body>
<div class="header">
    <h1>Управление компаниями</h1>
</div>
<div class="container">
    <div class="form-group">
        <label for="action">Выберите действие:</label>
        <select id="action" onchange="toggleForm()">
            <option value="create">Создать компанию</option>
            <option value="update">Обновить данные компании</option>
            <option value="delete">Удалить компанию</option>
        </select>
    </div>

    <div id="createForm">
        <h2>Создать компанию</h2>
        <form id="createCompanyForm">
            <div class="form-group">
                <label for="nameOfOrganization">Название организации:</label>
                <input type="text" id="nameOfOrganization" name="nameOfOrganization" required>
            </div>
            <div class="form-group">
                <label for="legalAddress">Юридический адрес:</label>
                <input type="text" id="legalAddress" name="legalAddress" required>
            </div>
            <div class="form-group">
                <label for="actualAddress">Фактический адрес:</label>
                <input type="text" id="actualAddress" name="actualAddress" required>
            </div>
            <div class="form-group">
                <label for="inn">ИНН:</label>
                <input type="text" id="inn" name="inn" required>
            </div>
            <div class="form-group">
                <label for="kpp">КПП:</label>
                <input type="text" id="kpp" name="kpp" required>
            </div>
            <div class="form-group">
                <label for="bik">БИК:</label>
                <input type="text" id="bik" name="bik" required>
            </div>
            <div class="form-group">
                <label for="currentAccount">Расчетный счет:</label>
                <input type="text" id="currentAccount" name="currentAccount" required>
            </div>
            <div class="form-group">
                <label for="correspondentAccount">Корреспондентский счет:</label>
                <input type="text" id="correspondentAccount" name="correspondentAccount" required>
            </div>
            <div class="form-group">
                <label for="okpo">ОКПО:</label>
                <input type="text" id="okpo" name="okpo" required>
            </div>
            <div class="form-group">
                <label for="okato">ОКАТО:</label>
                <input type="text" id="okato" name="okato" required>
            </div>
            <div class="form-group">
                <label for="okved">ОКВЭД:</label>
                <input type="text" id="okved" name="okved" required>
            </div>
            <div class="form-group">
                <label for="ogrn">ОГРН:</label>
                <input type="text" id="ogrn" name="ogrn" required>
            </div>
            <div class="form-group">
                <label for="generalManager">ФИО генерального директора:</label>
                <input type="text" id="generalManager" name="generalManager" required>
            </div>
            <div class="form-group">
                <label for="email">Email:</label>
                <input type="email" id="email" name="email" required>
            </div>
            <div class="form-group">
                <label for="phone">Телефон:</label>
                <input type="text" id="phone" name="phone" required>
            </div>
            <button type="submit" class="button">Создать</button>
        </form>
    </div>

    <div id="updateForm" style="display: none;">
        <h2>Обновить данные компании</h2>
        <form id="updateCompanyForm">
            <div class="form-group">
                <label for="updateInn">ИНН компании:</label>
                <input type="text" id="updateInn" name="inn" required>
            </div>
            <div class="form-group">
                <label for="updateNameOfOrganization">Название организации:</label>
                <input type="text" id="updateNameOfOrganization" name="nameOfOrganization" required>
            </div>
            <div class="form-group">
                <label for="updateLegalAddress">Юридический адрес:</label>
                <input type="text" id="updateLegalAddress" name="legalAddress" required>
            </div>
            <div class="form-group">
                <label for="updateActualAddress">Фактический адрес:</label>
                <input type="text" id="updateActualAddress" name="actualAddress" required>
            </div>
            <div class="form-group">
                <label for="updateKpp">КПП:</label>
                <input type="text" id="updateKpp" name="kpp" required>
            </div>
            <div class="form-group">
                <label for="updateBik">БИК:</label>
                <input type="text" id="updateBik" name="bik" required>
            </div>
            <div class="form-group">
                <label for="updateCurrentAccount">Расчетный счет:</label>
                <input type="text" id="updateCurrentAccount" name="currentAccount" required>
            </div>
            <div class="form-group">
                <label for="updateCorrespondentAccount">Корреспондентский счет:</label>
                <input type="text" id="updateCorrespondentAccount" name="correspondentAccount" required>
            </div>
            <div class="form-group">
                <label for="updateOkpo">ОКПО:</label>
                <input type="text" id="updateOkpo" name="okpo" required>
            </div>
            <div class="form-group">
                <label for="updateOkato">ОКАТО:</label>
                <input type="text" id="updateOkato" name="okato" required>
            </div>
            <div class="form-group">
                <label for="updateOkved">ОКВЭД:</label>
                <input type="text" id="updateOkved" name="okved" required>
            </div>
            <div class="form-group">
                <label for="updateOgrn">ОГРН:</label>
                <input type="text" id="updateOgrn" name="ogrn" required>
            </div>
            <div class="form-group">
                <label for="updateGeneralManager">ФИО генерального директора:</label>
                <input type="text" id="updateGeneralManager" name="generalManager" required>
            </div>
            <div class="form-group">
                <label for="updateEmail">Email:</label>
                <input type="email" id="updateEmail" name="email" required>
            </div>
            <div class="form-group">
                <label for="updatePhone">Телефон:</label>
                <input type="text" id="updatePhone" name="phone" required>
            </div>
            <button type="submit" class="button">Обновить</button>
        </form>
    </div>

    <div id="deleteForm" style="display: none;">
        <h2>Удалить компанию</h2>
        <form id="deleteCompanyForm">
            <div class="form-group">
                <label for="deleteInn">ИНН компании:</label>
                <input type="text" id="deleteInn" name="inn" required>
            </div>
            <button type="submit" class="button">Удалить</button>
        </form>
    </div>

    <div id="response" class="response"></div>
</div>

<script>
    function toggleForm() {
        const action = document.getElementById('action').value;
        document.getElementById('createForm').style.display = action === 'create' ? 'block' : 'none';
        document.getElementById('updateForm').style.display = action === 'update' ? 'block' : 'none';
        document.getElementById('deleteForm').style.display = action === 'delete' ? 'block' : 'none';
    }

    document.getElementById('createCompanyForm').addEventListener('submit', function(event) {
        event.preventDefault();
        const formData = new FormData(this);
        const data = Object.fromEntries(formData.entries());

        fetch('/clients', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)
        })
            .then(response => response.json())
            .then(data => {
                document.getElementById('response').innerText = data.message;
            })
            .catch(error => {
                console.error('Error:', error);
            });
    });

    document.getElementById('updateCompanyForm').addEventListener('submit', function(event) {
        event.preventDefault();
        const formData = new FormData(this);
        const data = Object.fromEntries(formData.entries());
        const inn = data.inn;

        fetch(`/clients/${inn}`, {
            method: 'PUT',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)
        })
            .then(response => response.json())
            .then(data => {
                document.getElementById('response').innerText = data.message;
            })
            .catch(error => {
                console.error('Error:', error);
            });
    });

    document.getElementById('deleteCompanyForm').addEventListener('submit', function(event) {
        event.preventDefault();
        const inn = document.getElementById('deleteInn').value;

        fetch(`/clients/${inn}`, {
            method: 'DELETE'
        })
            .then(response => response.json())
            .then(data => {
                document.getElementById('response').innerText = data.message;
            })
            .catch(error => {
                console.error('Error:', error);
            });
    });
</script>
</body>
</html>